@using XiaoHuLuMvcCore.Models.Examination;
@{
    Layout = null;
}
@model List<XiaoHuLuMvcCore.Models.Examination.AnswerModel>
@{
    ViewData["Title"] = "Index";
}
<h2>小葫芦程远护士模考</h2>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>小葫芦程远护士模考</title>
    <link href="~/css/bootstrap.css" rel="stylesheet" />
    <link href="~/css/main.css" rel="stylesheet" />
    <link href="~/css/iconfont.css" rel="stylesheet" type="text/css" />
    <link href="~/css/test.css" rel="stylesheet" />
    <link href="~/css/jisuanqi.css" rel="stylesheet" />
    <style>
        .hasBeenAnswer {
            background: #5d9cec;
            color: #fff;
        }
    </style>

</head>
<body>
    <div class="main">
        <!--nr start-->
        <div class="test_main">
            <div class="nr_left">
                <div class="test">
                    <form action="" method="post">
                        <div class="test_title">
                            <p class="test_time">
                                <i class="icon iconfont">&#xe6fb;</i><b class="alt-1">00:10</b>
                            </p>
                            <font><input type="button" name="test_jiaojuan" id="endCommit" onclick="Commit()" value="交卷"></font>  <font>  </font>
                            <font><input type="button" name="test_jiaojuan" id="end" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" value="帮助"></font><font>  </font>
                            <font><input type="button" name="button1" id="button1" value="计算器"></font>
                        </div>
                        @{
                            var num = 0;

                        }
                        @foreach (var item in ViewBag.texttype as List<TextType>)
                        {
                            <div class="test_content">
                                <div class="test_content_title">
                                    <h2>@item.ExamType</h2>
                                    @{


                                        var num1 = 0;
                                        num1 = Model.Where(s => s.TypeOfExam == item.ID).Count();
                                    }
                                    <p>
                                        <span>共</span><i class="content_lit">@num1</i><span>题，</span><span>合计</span><i class="content_fs">@num1</i><span>分</span>
                                    </p>
                                </div>
                            </div>
                            if (item.ID == 1)
                            {
                                @foreach (var item1 in Model)
                                {
                                    if (@item1.TypeOfExam == 1)
                                    {
                                        num++;
                                        <div class="test_content_nr">
                                            <ul>
                                                <li id="@item1.Id">
                                                    <div class="test_content_nr_tt">
                                                        <i>@num</i><span>(1分)</span><font>@item1.Subject</font><b class="icon iconfont">
                                                            &#xe881;
                                                        </b>
                                                    </div>
                                                    <div class="test_content_nr_main">
                                                        <ul>
                                                            @if (@item1.AnswerA != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@num"
                                                                           id="@item1.Id+1" value="A" />
                                                                    <label for="@item1.Id+1">
                                                                        A.
                                                                        <p class="ue" style="display: inline;">@item1.AnswerA</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (@item1.AnswerB != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@num"
                                                                           id="@item1.Id+2" value="B" />
                                                                    <label for="@item1.Id+2">
                                                                        B.
                                                                        <p class="ue" style="display: inline;">@item1.AnswerB</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (@item1.AnswerC != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@num"
                                                                           id="@item1.Id+3" value="C" />
                                                                    <label for="@item1.Id+3">
                                                                        C.
                                                                        <p class="ue" style="display: inline;">@item1.AnswerC</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (@item1.AnswerD != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@num"
                                                                           id="@item1.Id+4" value="D" />
                                                                    <label for="@item1.Id+4">
                                                                        D.
                                                                        <p class="ue" style="display: inline;">@item1.AnswerD</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (@item1.AnswerE != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@num"
                                                                           id="@item1.Id+5" value="E" />
                                                                    <label for="@item1.Id+5">
                                                                        E.
                                                                        <p class="ue" style="display: inline;">@item1.AnswerE</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    }
                                }
                            }
                            if (item.ID == 2)
                            {
                                @foreach (var item2 in Model)
                                {
                                    if (@item2.TypeOfExam == 2)
                                    {
                                        num++;
                                        <div class="test_content_nr">
                                            <ul>
                                                <li id="@item2.Id">
                                                    <div class="test_content_nr_tt">
                                                        <i>@num</i><span>(1分)</span><font>@item2.Subject</font><b class="icon iconfont">&#xe881;</b>
                                                    </div>
                                                    <div class="test_content_nr_main">
                                                        <ul>
                                                            @if (item2.AnswerA != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="checkbox" class="radioOrCheck" name="answer1"
                                                                           id="@item2.Id+1" />
                                                                    <label for="@item2.Id+1">
                                                                        A.
                                                                        <p class="ue" style="display: inline;">@item2.AnswerA</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item2.AnswerB != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="checkbox" class="radioOrCheck" name="answer1"
                                                                           id="@item2.Id+2" />

                                                                    <label for="@item2.Id+2">
                                                                        B.
                                                                        <p class="ue" style="display: inline;">@item2.AnswerB</p>
                                                                    </label>

                                                                </li>
                                                            }
                                                            @if (item2.AnswerC != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="checkbox" class="radioOrCheck" name="answer1"
                                                                           id="@item2.Id+3" />

                                                                    <label for="@item2.Id+3">
                                                                        C.
                                                                        <p class="ue" style="display: inline;">@item2.AnswerC</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item2.AnswerD != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="checkbox" class="radioOrCheck" name="answer1"
                                                                           id="@item2.Id+4" />

                                                                    <label for="@item2.Id+4">
                                                                        D.
                                                                        <p class="ue" style="display: inline;">@item2.AnswerD</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item2.AnswerE != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="checkbox" class="radioOrCheck" name="answer1"
                                                                           id="@item2.Id+5" />

                                                                    <label for="@item2.Id+5">
                                                                        E.
                                                                        <p class="ue" style="display: inline;">@item2.AnswerE</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    }
                                }
                            }
                            if (item.ID == 3)
                            {
                                @foreach (var item3 in Model)
                                {
                                    if (@item3.TypeOfExam == 3)
                                    {
                                        num++;
                                        <div class="test_content_nr">
                                            <ul>
                                                <li id="@item3.Id">
                                                    <div class="test_content_nr_tt">
                                                        <i>@num</i><span>(1分)</span><font>@item3.Subject</font><b class="icon iconfont">&#xe881;</b>
                                                    </div>
                                                    <div class="test_content_nr_main">
                                                        <ul>
                                                            <li class="option">
                                                                <input type="radio" class="radioOrCheck" name="@item3.Id"
                                                                       id="@item3.Id+1" />
                                                                <label for="@item3.Id+1">
                                                                    A.
                                                                    <p class="ue" style="display: inline;">@item3.AnswerA</p>
                                                                </label>
                                                            </li>
                                                            <li class="option">
                                                                <input type="radio" class="radioOrCheck" name="@item3.Id"
                                                                       id="@item3.Id+2" />

                                                                <label for="@item3.Id+2">
                                                                    B.
                                                                    <p class="ue" style="display: inline;">@item3.AnswerB</p>
                                                                </label>

                                                            </li>

                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    }
                                }
                            }
                            if (item.ID == 4)
                            {
                                @foreach (var item4 in Model)
                                {
                                    if (@item4.TypeOfExam == 4)
                                    {
                                        num++;
                                        <div class="test_content_nr">
                                            <ul>
                                                <li id="@item4.Id">
                                                    <div class="test_content_nr_tt">
                                                        <i>@num</i><span>(1分)</span><font>
                                                            @item4.Subject
                                                            <img src="~/img/@item4.Photo" />
                                                        </font><b class="icon iconfont">&#xe881;</b>
                                                    </div>
                                                    <div class="test_content_nr_main">
                                                        <ul>

                                                            @if (item4.AnswerA != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@item4.Id"
                                                                           id="@item4.Id+1" />
                                                                    <label for="@item4.Id+1">
                                                                        A.
                                                                        <p class="ue" style="display: inline;">@item4.AnswerA</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item4.AnswerB != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@item4.Id"
                                                                           id="@item4.Id+2" />
                                                                    <label for="@item4.Id+2">
                                                                        B.
                                                                        <p class="ue" style="display: inline;">@item4.AnswerB</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item4.AnswerC != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@item4.Id"
                                                                           id="@item4.Id+3" />
                                                                    <label for="@item4.Id+3">
                                                                        C.
                                                                        <p class="ue" style="display: inline;">@item4.AnswerC</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item4.AnswerD != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@item4.Id"
                                                                           id="@item4.Id+4" />

                                                                    <label for="@item4.Id+4">
                                                                        D.
                                                                        <p class="ue" style="display: inline;">@item4.AnswerD</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                            @if (item4.AnswerE != "")
                                                            {
                                                                <li class="option">
                                                                    <input type="radio" class="radioOrCheck" name="@item4.Id"
                                                                           id="@item4.Id+5" />

                                                                    <label for="@item4.Id+5">
                                                                        E.
                                                                        <p class="ue" style="display: inline;">@item4.AnswerE</p>
                                                                    </label>
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    }
                                }
                            }
                            if (item.ID == 5)
                            {
                                @foreach (var item5 in Model)
                                {
                                    if (@item5.TypeOfExam == 5)
                                    {
                                        num++;
                                        <div class="test_content_nr">
                                            <ul>
                                                <li id="@item5.Id">
                                                    <div class="test_content_nr_tt">
                                                        <i>@num</i><span>(1分)</span><font>
                                                            @item5.Subject
                                                        </font><b class="icon iconfont">&#xe881;</b>
                                                    </div>
                                                    <div class="test_content_nr_main">
                                                        <ul>
                                                            <li class="option">
                                                                <label style="font-size :30px;">答案:</label><input type="text" class="radioOrCheck" name="@item5.Id" id="@item5.Id+1" style="height:30px;width:300px;" />
                                                                <label for="@item5.Id+1">
                                                                    <br />
                                                                    <br />
                                                                    <br />
                                                                </label>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    }
                                }
                            }
                        }
                        }
                    </form>
                </div>
            </div>
            <div class="nr_right">
                <div class="nr_rt_main">
                    <div class="rt_nr1">
                        <div class="rt_nr1_title">
                            <h1>
                                <i class="icon iconfont">&#xe692;</i>答题卡
                            </h1>
                            <p class="test_time">
                                <i class="icon iconfont">&#xe6fb;</i><b class="alt-1">00:10</b>
                            </p>
                        </div>
                        @{ var num444 = 0;}
                        @foreach (var item7 in ViewBag.texttype as List<TextType>)
                        {
                            <div class="rt_content">
                                <div class="rt_content_tt">
                                    <h2>@item7.ExamType</h2>
                                    @{
                                        var num3 = 0;
                                        num3 = Model.Where(s => s.TypeOfExam == item7.ID).Count();
                                    }

                                    <p>
                                        <span>共</span><i class="content_lit">@num3</i><span>题</span>
                                    </p>
                                </div>
                                <div class="rt_content_nr answerSheet">
                                    <ul>

                                        @if (item7.ID == 1)
                                        {
                                            @foreach (var item71 in Model)
                                            {
                                                if (@item71.TypeOfExam == 1)
                                                {
                                                    num444++;
                                                    <li><a href="#@item71.Id">@num444</a></li>
                                                }
                                            }
                                        }
                                        @if (item7.ID == 2)
                                        {
                                            @foreach (var item72 in Model)
                                            {
                                                if (@item72.TypeOfExam == 2)
                                                {
                                                    num444++;
                                                    <li><a href="#@item72.Id">@num444</a></li>
                                                }
                                            }
                                        }
                                        @if (item7.ID == 3)
                                        {
                                            @foreach (var item73 in Model)
                                            {
                                                if (@item73.TypeOfExam == 3)
                                                {
                                                    num444++;
                                                    <li><a href="#@item73.Id">@num444</a></li>
                                                }
                                            }
                                        }
                                        @if (item7.ID == 4)
                                        {
                                            @foreach (var item74 in Model)
                                            {
                                                if (@item74.TypeOfExam == 4)
                                                {
                                                    num444++;
                                                    <li><a href="#@item74.Id">@num444</a></li>
                                                }
                                            }
                                        }
                                        @if (item7.ID == 5)
                                        {
                                            @foreach (var item75 in Model)
                                            {
                                                if (@item75.TypeOfExam == 5)
                                                {
                                                    num444++;
                                                    <li><a href="#@item75.Id">@num444</a></li>
                                                }
                                            }
                                        }
                                    </ul>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
        <!--nr end-->
        <div class="foot"></div>
    </div>
    <div class="wrap" id="jisuanqi" style="display:none">
        <div class="result"></div>
        <div class="box">
            <div class="box">
                <div class="button big">c</div>
                <div class="button">1</div>
                <div class="button">2</div>
                <div class="button orange">+</div>
                <div class="button">3</div>
                <div class="button">4</div>
                <div class="button">5</div>
                <div class="button">6</div>
                <div class="button orange">-</div>
                <div class="button">7</div>
                <div class="button">8</div>
                <div class="button">9</div>
                <div class="button position">×</div>
                <div class="button big">0</div>
                <div class="button">.</div>
                <div class="button spe spe2">=</div>
                <div class="button orange">÷</div>
            </div>
        </div>
    </div>
    <div>
        @*模态窗*@
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title" id="myModalLabel">帮助</h4>
                    </div>
                    <div class="modal-body">@ViewBag.explain</div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/js/jquery-1.11.3.min.js"></script>
    <script src="~/js/jquery.easy-pie-chart.js"></script>
    <!--时间js-->
    <script src="~/js/jquery.countdown.js"></script>
    <script src="~/js/bootstrap.js"></script>
    <style>
        .rt_nr1_title h1 {
           line-height:40px;
           margin:0 
        }
        .rt_content_tt h2 {
        
        margin:0
        }

    </style>
    <script>
        //时间设定
        window.jQuery(function ($) {
            "use strict";
            $('time').countDown({
                with_separators: false
            });
            $('.alt-1').countDown({
                css_class: 'countdown-alt-1'
            });
            $('.alt-2').countDown({
                css_class: 'countdown-alt-2'
            });
        });

        //题目跳转和改变颜色
        $(function () {
            $('li.option input').click(function () {
                debugger;
                var examId = $(this).closest('.test_content_nr_main').closest('li').attr('id'); // 得到题目ID
                var cardLi = $('a[href=#' + examId + ']'); // 根据题目ID找到对应答题卡
                // 设置已答题
                if (!cardLi.hasClass('hasBeenAnswer')) {
                    cardLi.addClass('hasBeenAnswer');
                }
            });
            $('#myModal').modal('hide');
        });

        //计算器
        var num1 = 0;
        var num2 = '+';
        var num3 = 0;
        var x = null;
        var arr = [];
        var con = document.getElementsByClassName('result')[0];
        for (var i = 0; i < 17; i++) {
            var but = document.getElementsByClassName('button')[i];
            but.onclick = function () {
                x = this.innerHTML;
                main();
            }
        }
        //var AllNum = 0;
        //var array1 = [];
        //var obj1 = { answer: "", id: 0 };
        @*function aaa() {
            alert(1);
             for (var i = 1; i < = @Model.Count; i++) {
                var b = "";
                alert(2);
                var a = $("[name='"+i+"']")
                $(a).each(function () {
                    if ($(this).val() ){
                        b += $(this).val() + ',';
                        alert(3);
                    }
                    else {
                        b += '' + ',';
                        alert(4);
                    }
                })
            }
            alert(5);
        }*@
        function main() {
            if (!isNaN(x) || x === '.') {
                arr.push(x);
                con.innerHTML = arr.join('');
            } else if (x === 'c') {
                num1 = 0;
                num2 = '+';
                num3 = 0;
                x = null;
                arr = [];
                con.innerHTML = num1;
            } else {
                num3 = parseFloat(arr.join(''));
                count();
                con.innerHTML = num1;
                arr = [];
                num2 = x;
            }
        }
        function count() {
            if (num2 === '+') {
                num1 += num3;
            }
            if (num2 === '-') {
                num1 -= num3;
            }
            if (num2 === '×') {
                num1 *= num3;
            }
            if (num2 === '÷') {
                num1 /= num3;
            }
        }

        //显示隐藏计算器
        $("#button1").click(function () {
            $("#jisuanqi").toggle();
        });


        //确认框
        function Commit() {
            var r = confirm("请检查是否有题未提交!\n一旦交卷不可从新答题！");
            if (r == true) {

                location.href = "";
            }


        }



    </script>
</body>
</html>